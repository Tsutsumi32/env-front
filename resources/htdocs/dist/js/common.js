"use strict";(()=>{var e=Object.defineProperty;var t,n=class{constructor(e,t={}){this.options=t,this.ctrl=null,this.bag=null,this.element=null,"string"==typeof e?(this.selector=e,this.element=document.querySelector(e)):e instanceof HTMLElement?(this.element=e,this.selector=null):(this.selector=null,this.element=null),this.element?this.initialize():this.selector&&console.warn(`BaseModuleClass: セレクター "${this.selector}" に対応する要素が見つかりません。`)}initialize(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const i=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);i&&"function"==typeof t[i]&&e.add(()=>t[i](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BaseModuleClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),this.init(this.element,{bag:this.bag,signal:this.ctrl.signal})}init(e,{bag:t,signal:n}){throw new Error("BaseModuleClass: init()メソッドはサブクラスで実装する必要があります。")}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}},s=class extends n{init(e,{bag:t,signal:n}){const{headerSelector:s=".js-header",menuBtnSelector:i=".js-header-btn",menuSelector:o=".js-header-menu",bgSelector:l=".js-header-bg",activeClass:a="is_active",displayClass:r="is-display",openDelay:c=300,closeDelay:u=600}=this.options,d=document.querySelector(s);if(!d)return void console.warn("ヘッダー要素が見つかりません。");const g=d.querySelector(i),h=d.querySelector(o),m=d.querySelector(l);if(!h||!g||!m)return void console.warn("ヘッダーの必要な要素が見つかりません。");g.addEventListener("click",()=>{this.toggleHeaderMenu({menuBtn:g,menu:h,bg:m,activeClass:a,displayClass:r,openDelay:c,closeDelay:u,signal:n,bag:t})},{signal:n});h.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{const e=setTimeout(()=>{this.closeHeaderMenu({menuBtn:g,menu:h,bg:m,activeClass:a,displayClass:r,closeDelay:u,signal:n,bag:t})},c);n.addEventListener("abort",()=>clearTimeout(e),{once:!0})},{signal:n})})}toggleHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:i="is_active",displayClass:o="is-display",openDelay:l=300,closeDelay:a=600,signal:r,bag:c}=e;if(t.style.pointerEvents="none",t.classList.toggle(i),s.classList.toggle(i),t.classList.contains(i)){n.classList.toggle(o);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(i)},l);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}else{n.classList.toggle(i);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(o)},a);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}}closeHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:i="is_active",displayClass:o="is-display",closeDelay:l=600,signal:a,bag:r}=e;t.style.pointerEvents="none",t.classList.remove(i),s.classList.remove(i),n.classList.remove(i);const c=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(o)},l);a.addEventListener("abort",()=>clearTimeout(c),{once:!0})}},i=class e extends n{init(t,{bag:n,signal:s}){const{buttonSelector:i=".js_themeSetting",storageEnabled:o=!0}=this.options;this.initializeTheme(o);const l=document.querySelectorAll(i);if(0===l.length)return;l.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-theme");t?this.setTheme(t,o):console.warn("data-theme属性が設定されていません。",e)},{signal:s})});const a=window.matchMedia("(prefers-color-scheme: dark)"),r=t=>{if(o&&!localStorage.getItem(e.STORAGE_KEY)){const e=t.matches?"dark":"default";this.setTheme(e,!1)}};a.addEventListener?a.addEventListener("change",r,{signal:s}):(a.addListener(r),s.addEventListener("abort",()=>{a.removeListener(r)}))}initializeTheme(t){let n="default";if(t){const t=localStorage.getItem(e.STORAGE_KEY);t&&(n=t)}t&&localStorage.getItem(e.STORAGE_KEY)||window.matchMedia("(prefers-color-scheme: dark)").matches&&(n="dark"),this.setTheme(n,!1)}setTheme(t,n=!0){if(t||(t="default"),document.documentElement.setAttribute("data-theme",t),n)try{localStorage.setItem(e.STORAGE_KEY,t)}catch(e){console.warn("ローカルストレージへの保存に失敗しました。",e)}const s=new CustomEvent("themechange",{detail:{theme:t}});document.dispatchEvent(s)}getCurrentTheme(){return document.documentElement.getAttribute("data-theme")||"default"}};((t,n,s)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s})(i,"symbol"!=typeof(t="STORAGE_KEY")?t+"":t,"theme-mode");var o=i;function l(e){const t=document.querySelectorAll('a[href^="#"]');t&&0!==t.length&&t.forEach(t=>{t.addEventListener("click",t=>function(e,t){const n=e.currentTarget.getAttribute("href");if(!n||"#"===n||"#0"===n)return;const s=n.split("#")[1];if(!s)return;const i=document.getElementById(s)||document.querySelector(n);if(!i)return void console.warn(`ターゲット要素 "#${s}" が見つかりません。`);e.preventDefault(),function(e,t){const n=500,s=0,i=document.querySelector("header"),o=i?i.offsetHeight:0,l=e.getBoundingClientRect(),a=window.getComputedStyle(e),r=parseFloat(a.getPropertyValue("padding-block-start")),c=window.scrollY;!function(e,t,n){const s=window.scrollY,i=e-s;let o=null,l=null;function a(e){if(n?.aborted)return;null===o&&(o=e);const r=e-o,c=Math.min(r/t,1),u=c<.5?4*c*c*c:1-Math.pow(-2*c+2,3)/2;window.scrollTo(0,s+i*u),r<t&&(l=requestAnimationFrame(a))}l=requestAnimationFrame(a),n&&n.addEventListener("abort",()=>{null!==l&&cancelAnimationFrame(l)},{once:!0})}(c+l.top+r-o+s,n,t)}(i,t)}(t,e),{signal:e})})}var a=e=>{document.querySelectorAll("img").forEach(function(t){t.addEventListener("contextmenu",function(e){e.preventDefault()},{signal:e}),t.addEventListener("selectstart",function(e){e.preventDefault()},{signal:e}),t.addEventListener("mousedown",function(e){e.preventDefault()},{signal:e})})};new class{constructor(e=null,t=null){this.selector=e,this.pageInitFunction=t,this.ctrl=null,this.bag=null,this.waitForDOM()}waitForDOM(){const e=()=>{this.element=this.selector?document.querySelector(this.selector):document.body,!this.selector||this.element?this.init():console.warn(`セレクター "${this.selector}" に対応する要素が見つかりません。`)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}init(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const i=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);i&&"function"==typeof t[i]&&e.add(()=>t[i](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BasePageClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),this.initCommon(),this.initPage()}initCommon(){!function({bag:e,signal:t}){new s(".js-header",{}),new o("body",{}),l(t),document.body.classList.remove("no-js"),a(t)}({bag:this.bag,signal:this.ctrl.signal})}initPage(){this.pageInitFunction&&"function"==typeof this.pageInitFunction&&this.pageInitFunction({bag:this.bag,signal:this.ctrl.signal})}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}}("body",()=>{console.log("common")})})();