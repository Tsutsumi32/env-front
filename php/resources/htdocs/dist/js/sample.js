"use strict";(()=>{var e=Object.defineProperty;var t=class{constructor(e,t={}){this.options=t,this.ctrl=null,this.bag=null,this.element=null,"string"==typeof e?(this.selector=e,this.element=document.querySelector(e)):e instanceof HTMLElement?(this.element=e,this.selector=null):(this.selector=null,this.element=null),this.element?this.initialize():this.selector&&console.warn(`BaseModuleClass: セレクター "${this.selector}" に対応する要素が見つかりません。`)}initialize(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const o=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);o&&"function"==typeof t[o]&&e.add(()=>t[o](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BaseModuleClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),this.init(this.element,{bag:this.bag,signal:this.ctrl.signal})}init(e,{bag:t,signal:n}){throw new Error("BaseModuleClass: init()メソッドはサブクラスで実装する必要があります。")}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}},n=class extends t{init(e,{bag:t,signal:n}){const{headerSelector:s=".js_header",menuBtnSelector:o=".js_headerBtn",menuSelector:i=".js_headerMenu",bgSelector:l=".js_headerBg",activeClass:a="is_active",displayClass:r="is-display",openDelay:c=300,closeDelay:u=600}=this.options,d=document.querySelector(s);if(!d)return void console.warn("ヘッダー要素が見つかりません。");const g=d.querySelector(o),h=d.querySelector(i),m=d.querySelector(l);if(!h||!g||!m)return void console.warn("ヘッダーの必要な要素が見つかりません。");g.addEventListener("click",()=>{this.toggleHeaderMenu({menuBtn:g,menu:h,bg:m,activeClass:a,displayClass:r,openDelay:c,closeDelay:u,signal:n,bag:t})},{signal:n});h.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{const e=setTimeout(()=>{this.closeHeaderMenu({menuBtn:g,menu:h,bg:m,activeClass:a,displayClass:r,closeDelay:u,signal:n,bag:t})},c);n.addEventListener("abort",()=>clearTimeout(e),{once:!0})},{signal:n})})}toggleHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:o="is_active",displayClass:i="is-display",openDelay:l=300,closeDelay:a=600,signal:r,bag:c}=e;if(t.style.pointerEvents="none",t.classList.toggle(o),s.classList.toggle(o),t.classList.contains(o)){n.classList.toggle(i);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(o)},l);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}else{n.classList.toggle(o);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(i)},a);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}}closeHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:o="is_active",displayClass:i="is-display",closeDelay:l=600,signal:a,bag:r}=e;t.style.pointerEvents="none",t.classList.remove(o),s.classList.remove(o),n.classList.remove(o);const c=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(i)},l);a.addEventListener("abort",()=>clearTimeout(c),{once:!0})}};function s(e){const t=document.querySelectorAll('a[href^="#"]');t&&0!==t.length&&t.forEach(t=>{t.addEventListener("click",t=>function(e,t){const n=e.currentTarget.getAttribute("href");if(!n||"#"===n||"#0"===n)return;const s=n.split("#")[1];if(!s)return;const o=document.getElementById(s)||document.querySelector(n);if(!o)return void console.warn(`ターゲット要素 "#${s}" が見つかりません。`);e.preventDefault(),function(e,t){const n=500,s=0,o=document.querySelector("header"),i=o?o.offsetHeight:0,l=e.getBoundingClientRect(),a=window.getComputedStyle(e),r=parseFloat(a.getPropertyValue("padding-block-start")),c=window.scrollY;!function(e,t,n){const s=window.scrollY,o=e-s;let i=null,l=null;function a(e){if(n?.aborted)return;null===i&&(i=e);const r=e-i,c=Math.min(r/t,1),u=c<.5?4*c*c*c:1-Math.pow(-2*c+2,3)/2;window.scrollTo(0,s+o*u),r<t&&(l=requestAnimationFrame(a))}l=requestAnimationFrame(a),n&&n.addEventListener("abort",()=>{null!==l&&cancelAnimationFrame(l)},{once:!0})}(c+l.top+r-i+s,n,t)}(o,t)}(t,e),{signal:e})})}var o,i=(e,t=300,n="ease-out",s)=>"none"!==e.style.display&&e.offsetHeight>0?((e,t=300,n="ease-out",s)=>"none"===e.style.display||0===e.offsetHeight?Promise.resolve():new Promise(o=>{if(s?.aborted)return void o();const i=e.offsetHeight;e.style.height=i+"px",e.style.overflow="hidden",e.style.transition=`height ${t}ms ${n}`,e.offsetHeight,e.style.height="0px";const l=setTimeout(()=>{s?.aborted||(e.style.display="none",e.style.height="",e.style.overflow="",e.style.transition=""),o()},t);s&&s.addEventListener("abort",()=>{clearTimeout(l),o()},{once:!0})}))(e,t,n,s):((e,t=300,n="ease-out",s)=>"none"!==e.style.display&&e.offsetHeight>0?Promise.resolve():new Promise(o=>{if(s?.aborted)return void o();e.style.display="block",e.style.height="0px",e.style.overflow="hidden",e.style.transition=`height ${t}ms ${n}`,e.offsetHeight;const i=e.scrollHeight;e.style.height=i+"px";const l=setTimeout(()=>{s?.aborted||(e.style.height="",e.style.overflow="",e.style.transition=""),o()},t);s&&s.addEventListener("abort",()=>{clearTimeout(l),o()},{once:!0})}))(e,t,n,s),l=class extends t{init(e,{bag:t,signal:n}){const{btnSelector:s=".js_accordionBtn",parentSelector:o=".js_accordionParent",contentSelector:i=".js_accordionContents",activeClass:l="is_active",animationDuration:a=300,hideButtonOnOpen:r=!1,hideButtonSelector:c=null}=this.options;document.querySelectorAll(s).forEach(e=>{e.addEventListener("click",t=>{t.target.closest("a")||this.accordionToggle(e,{parentSelector:o,contentSelector:i,activeClass:l,animationDuration:a,hideButtonOnOpen:r,hideButtonSelector:c,signal:n})},{signal:n})})}accordionToggle(e,t={}){const{parentSelector:n=".js_accordionParent",contentSelector:s=".js_accordionContents",activeClass:o="is_active",animationDuration:l=300,hideButtonOnOpen:a=!1,hideButtonSelector:r=null,signal:c}=t,u=e.closest(n);if(!u)return;const d=u.querySelector(s);if(d){const t=!u.classList.contains(o);i(d,l,"ease-out",c),u.classList.toggle(o),t&&a&&(r?e.matches(r)&&(e.style.display="none"):e.style.display="none")}}},a=class e extends t{init(e,{bag:t,signal:n}){const{toggleButtonSelector:s=".js_themeToggle",storageEnabled:o=!0}=this.options,i=document.querySelectorAll(s);0!==i.length&&i.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-theme");t?this.setTheme(t,o):console.warn("data-theme属性が設定されていません。",e)},{signal:n})})}setTheme(t,n=!0){if(t||(t="default"),document.documentElement.setAttribute("data-theme",t),n)try{localStorage.setItem(e.STORAGE_KEY,t)}catch(e){console.warn("ローカルストレージへの保存に失敗しました。",e)}const s=new CustomEvent("themechange",{detail:{theme:t}});document.dispatchEvent(s)}getCurrentTheme(){return document.documentElement.getAttribute("data-theme")||"default"}};((t,n,s)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s})(a,"symbol"!=typeof(o="STORAGE_KEY")?o+"":o,"theme-mode");var r=a;new class{constructor(e=null,t=null){this.selector=e,this.pageInitFunction=t,this.ctrl=null,this.bag=null,this.waitForDOM()}waitForDOM(){const e=async()=>{this.element=this.selector?document.querySelector(this.selector):document.body,!this.selector||this.element?await this.init():console.warn(`セレクター "${this.selector}" に対応する要素が見つかりません。`)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}async init(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const o=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);o&&"function"==typeof t[o]&&e.add(()=>t[o](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BasePageClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),await this.initCommon(),this.initPage()}async initCommon(){await async function({bag:e,signal:t}){new n(".js_header",{}),s(t),document.body.classList.remove("no-js"),document.querySelectorAll("img").forEach(function(e){e.addEventListener("contextmenu",function(e){e.preventDefault()},{signal:t}),e.addEventListener("selectstart",function(e){e.preventDefault()},{signal:t}),e.addEventListener("mousedown",function(e){e.preventDefault()},{signal:t})});const o=document.querySelector("main"),i=document.querySelector(".footer");if(o&&i){const e=()=>{const e=window.innerHeight-i.offsetHeight;o.style.minHeight=`${e}px`};e(),window.addEventListener("resize",e,{signal:t})}}({bag:this.bag,signal:this.ctrl.signal})}initPage(){this.pageInitFunction&&"function"==typeof this.pageInitFunction&&this.pageInitFunction({bag:this.bag,signal:this.ctrl.signal})}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}}("body",()=>{console.log("sample page initialized"),document.querySelectorAll(".js_accordionParent").forEach(e=>{new l(e,{btnSelector:".js_accordionBtn",parentSelector:".js_accordionParent",contentSelector:".js_accordionContents",activeClass:"is_active",animationDuration:300})}),new r})})();