"use strict";(()=>{var e=new Set(["focus","blur","mouseenter","mouseleave","pointerenter","pointerleave","load","error","abort","resize","scroll","DOMContentLoaded","readystatechange","unload","beforeunload","pagehide","visibilitychange"]),t=new Set(["mousemove","pointermove","touchmove","wheel","drag","dragover","drop","input","keydown","keyup"]),n=(e,t,n)=>{const o=(e=>{if(e===document)return"document";if(e instanceof Element){const t=e.id?`#${e.id}`:"";return`<${e.tagName.toLowerCase()}${t}>`}return String(e)})(t);console.warn(`[delegate警告] ${n}\n  event="${e}" / root=${o}\n  → 委譲設計の見直しを推奨します。`)},o=(o,r,i,a={})=>{const s="string"==typeof a?{eventType:a}:a,{eventType:d="click",selector:l="[data-action]",getKey:c=e=>e.dataset.action,suppressWarn:u=!1,force:m=!1}=s;if(o){if(!u)if(e.has(d)){if(n(d,o,"委譲不可イベントです（バブリングしない/扱いが特殊）"),!m)return}else t.has(d)&&n(d,o,"委譲は非推奨です（高頻度/重い可能性）");o.addEventListener(d,e=>{const t=e.target instanceof Element?e.target:null;if(!t)return;const n=t.closest(l);if(!n)return;if(o instanceof Element&&!o.contains(n))return;const r=c(n),a=i[r];a&&a(e,n)},{signal:r.signal})}},r="is_active",i='a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])',a=(e,t={})=>{const{selector:n=i,filterVisible:o=!0}=t,r=e.querySelectorAll(n);return o?Array.from(r).filter(e=>{if(e.hasAttribute("disabled"))return!1;const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"collapse"!==t.visibility}):Array.from(r)},s=(e,t={})=>{const{trigger:n,fallbackSelector:o}=t;n instanceof HTMLElement&&document.activeElement===n&&n.blur(),requestAnimationFrame(()=>((e,t={})=>{const{fallbackSelector:n,selector:o}=t,r=a(e,{selector:o})[0];if(r)r.focus();else if(n){const t=e.querySelector(n);t instanceof HTMLElement&&(t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1"),t.focus())}})(e,{fallbackSelector:o}))},d=(e=!0,t)=>{e&&(document.body.style.paddingRight="0"),document.body.style.overflow="visible"},l="data-module",c="modal",u="data-modal-id",m=null,f=()=>document.querySelector(`[${l}="${c}"].${r}`),g=!1,b=()=>{g||(g=!0,document.addEventListener("keydown",e=>{if("Escape"===e.key)return void y();if("Tab"!==e.key)return;const t=f();t&&((e,t,n={})=>{if("Tab"!==t.key)return!1;const o=a(e,n);if(0===o.length)return!1;const r=document.activeElement,i=o[0],s=o[o.length-1];if(t.shiftKey){if(r===i)return t.preventDefault(),s.focus(),!0}else if(r===s)return t.preventDefault(),i.focus(),!0})(t,e)}),document.addEventListener("click",e=>{f()&&e.target.hasAttribute("data-modal-overlay")&&y()}))},v=(e={})=>{b();const t=(e=>{if(e){const t=document.querySelector(`[${l}="${c}"][${u}="${e}"]`);if(t)return t}return document.querySelector(`[${l}="${c}"]`)})(e.id??e.trigger?.getAttribute(u));t&&(m=e.trigger instanceof HTMLElement?e.trigger:document.activeElement,t.hidden=!1,t.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.classList.add(r),s(t,{trigger:m,fallbackSelector:"[data-modal-dialog]"})})}),((e=!0,t)=>{const n=window.innerWidth-document.documentElement.clientWidth;e&&(document.body.style.paddingRight=`${n}px`),document.body.style.overflow="hidden",t&&t.addEventListener("abort",()=>{e&&(document.body.style.paddingRight="0"),document.body.style.overflow="visible"},{once:!0})})(!0,void 0))},y=()=>{const e=f();if(!e)return void d(!0);const t=e.querySelectorAll("[data-modal-scroll]");t.length>0&&t.forEach(e=>{e.scrollTop=0}),e.classList.remove(r),d(!0);let n=!1;const o=m,i=()=>{var t;n||(n=!0,e.removeEventListener("transitionend",i),e.hidden=!0,e.setAttribute("aria-hidden","true"),(t=o)instanceof HTMLElement&&document.contains(t)&&t.focus(),m=null)};e.addEventListener("transitionend",i,{once:!0}),setTimeout(()=>i(),450)},p=({scope:e})=>{o(document,e,{"modal.open":(e,t)=>{v({trigger:t,id:t.getAttribute(u)})},"modal.close":()=>{y()}})};(async(e,t={})=>{await("loading"===document.readyState?new Promise(e=>{document.addEventListener("DOMContentLoaded",e,{once:!0})}):Promise.resolve());const n=e({...t,document:document,window:window})||(()=>{});window.addEventListener("pagehide",()=>n(),{once:!0})})((({getRoot:e,init:t})=>(n={})=>{const o=n.root??e?.(n);if(!o)return()=>{};const r=(e=>{const t=new AbortController;return e&&(e.aborted?t.abort():e.addEventListener("abort",()=>t.abort(),{once:!0})),{signal:t.signal,onDispose:e=>{t.signal.addEventListener("abort",e,{once:!0})},dispose:()=>t.abort()}})();return t?.({...n,root:o,scope:r}),()=>r.dispose()})({getRoot:()=>document.querySelector('[data-scope="home"]')||document.querySelector("#top"),init:({root:e,scope:t})=>{p({scope:t}),console.log("top"),o(e,t,{sampleClick:(e,t)=>{e.preventDefault(),console.log("サンプルボタンがクリックされました",t),t.dataset.message&&console.log(t.dataset.message)}})}}))})();