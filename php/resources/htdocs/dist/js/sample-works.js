"use strict";(()=>{var e=Object.defineProperty;var t=class{constructor(e,t={}){this.options=t,this.ctrl=null,this.bag=null,this.element=null,"string"==typeof e?(this.selector=e,this.element=document.querySelector(e)):e instanceof HTMLElement?(this.element=e,this.selector=null):(this.selector=null,this.element=null),this.element?this.initialize():this.selector&&console.warn(`BaseModuleClass: セレクター "${this.selector}" に対応する要素が見つかりません。`)}initialize(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const o=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);o&&"function"==typeof t[o]&&e.add(()=>t[o](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BaseModuleClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),this.init(this.element,{bag:this.bag,signal:this.ctrl.signal})}init(e,{bag:t,signal:n}){throw new Error("BaseModuleClass: init()メソッドはサブクラスで実装する必要があります。")}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}},n=class extends t{init(e,{bag:t,signal:n}){const{headerSelector:s=".js_header",menuBtnSelector:o=".js_headerBtn",menuSelector:i=".js_headerMenu",bgSelector:l=".js_headerBg",activeClass:a="is_active",displayClass:r="is-display",openDelay:c=300,closeDelay:u=600}=this.options,d=document.querySelector(s);if(!d)return void console.warn("ヘッダー要素が見つかりません。");const g=d.querySelector(o),h=d.querySelector(i),m=d.querySelector(l);if(!h||!g||!m)return void console.warn("ヘッダーの必要な要素が見つかりません。");g.addEventListener("click",()=>{this.toggleHeaderMenu({menuBtn:g,menu:h,bg:m,activeClass:a,displayClass:r,openDelay:c,closeDelay:u,signal:n,bag:t})},{signal:n});h.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{const e=setTimeout(()=>{this.closeHeaderMenu({menuBtn:g,menu:h,bg:m,activeClass:a,displayClass:r,closeDelay:u,signal:n,bag:t})},c);n.addEventListener("abort",()=>clearTimeout(e),{once:!0})},{signal:n})})}toggleHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:o="is_active",displayClass:i="is-display",openDelay:l=300,closeDelay:a=600,signal:r,bag:c}=e;if(t.style.pointerEvents="none",t.classList.toggle(o),s.classList.toggle(o),t.classList.contains(o)){n.classList.toggle(i);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(o)},l);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}else{n.classList.toggle(o);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(i)},a);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}}closeHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:o="is_active",displayClass:i="is-display",closeDelay:l=600,signal:a,bag:r}=e;t.style.pointerEvents="none",t.classList.remove(o),s.classList.remove(o),n.classList.remove(o);const c=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(i)},l);a.addEventListener("abort",()=>clearTimeout(c),{once:!0})}},s="theme-mode";function o(){try{return localStorage.getItem(s)}catch(e){return console.warn("ローカルストレージへのアクセスに失敗しました。",e),null}}function i(e){e||(e="default"),document.documentElement.setAttribute("data-theme",e)}function l(e=!0){let t="default";if(e){const e=o();e&&(t=e)}return e&&o()||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"default"),i(t),t}var a,r=class e extends t{init(e,{bag:t,signal:n}){const{toggleButtonSelector:s=".js_themeToggle",storageEnabled:o=!0}=this.options,i=document.querySelectorAll(s);0!==i.length&&i.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-theme");t?this.setTheme(t,o):console.warn("data-theme属性が設定されていません。",e)},{signal:n})})}setTheme(t,n=!0){if(t||(t="default"),document.documentElement.setAttribute("data-theme",t),n)try{localStorage.setItem(e.STORAGE_KEY,t)}catch(e){console.warn("ローカルストレージへの保存に失敗しました。",e)}const s=new CustomEvent("themechange",{detail:{theme:t}});document.dispatchEvent(s)}getCurrentTheme(){return document.documentElement.getAttribute("data-theme")||"default"}};((t,n,s)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s})(r,"symbol"!=typeof(a="STORAGE_KEY")?a+"":a,s);var c=r;function u(e){const t=document.querySelectorAll('a[href^="#"]');t&&0!==t.length&&t.forEach(t=>{t.addEventListener("click",t=>function(e,t){const n=e.currentTarget.getAttribute("href");if(!n||"#"===n||"#0"===n)return;const s=n.split("#")[1];if(!s)return;const o=document.getElementById(s)||document.querySelector(n);if(!o)return void console.warn(`ターゲット要素 "#${s}" が見つかりません。`);e.preventDefault(),function(e,t){const n=500,s=0,o=document.querySelector("header"),i=o?o.offsetHeight:0,l=e.getBoundingClientRect(),a=window.getComputedStyle(e),r=parseFloat(a.getPropertyValue("padding-block-start")),c=window.scrollY;!function(e,t,n){const s=window.scrollY,o=e-s;let i=null,l=null;function a(e){if(n?.aborted)return;null===i&&(i=e);const r=e-i,c=Math.min(r/t,1),u=c<.5?4*c*c*c:1-Math.pow(-2*c+2,3)/2;window.scrollTo(0,s+o*u),r<t&&(l=requestAnimationFrame(a))}l=requestAnimationFrame(a),n&&n.addEventListener("abort",()=>{null!==l&&cancelAnimationFrame(l)},{once:!0})}(c+l.top+r-i+s,n,t)}(o,t)}(t,e),{signal:e})})}function d({bag:e,signal:t}){l(!0),function(e,t=!0){const n=window.matchMedia("(prefers-color-scheme: dark)"),s=e=>{if(t&&!o()){const t=e.matches?"dark":"default";i(t);const n=new CustomEvent("themechange",{detail:{theme:t}});document.dispatchEvent(n)}};n.addEventListener?n.addEventListener("change",s,{signal:e}):(n.addListener(s),e.addEventListener("abort",()=>{n.removeListener(s)}))}(t,!0),new n(".js-header",{}),new c("body",{}),u(t),document.body.classList.remove("no-js"),g(t)}var g=e=>{document.querySelectorAll("img").forEach(function(t){t.addEventListener("contextmenu",function(e){e.preventDefault()},{signal:e}),t.addEventListener("selectstart",function(e){e.preventDefault()},{signal:e}),t.addEventListener("mousedown",function(e){e.preventDefault()},{signal:e})})};new class{constructor(e=null,t=null){this.selector=e,this.pageInitFunction=t,this.ctrl=null,this.bag=null,this.waitForDOM()}waitForDOM(){const e=()=>{this.element=this.selector?document.querySelector(this.selector):document.body,!this.selector||this.element?this.init():console.warn(`セレクター "${this.selector}" に対応する要素が見つかりません。`)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}init(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const o=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);o&&"function"==typeof t[o]&&e.add(()=>t[o](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BasePageClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),this.initCommon(),this.initPage()}initCommon(){d({bag:this.bag,signal:this.ctrl.signal})}initPage(){this.pageInitFunction&&"function"==typeof this.pageInitFunction&&this.pageInitFunction({bag:this.bag,signal:this.ctrl.signal})}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}}("body",()=>{console.log("sample-works page initialized"),new c})})();