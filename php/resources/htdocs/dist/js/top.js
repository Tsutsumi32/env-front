"use strict";(()=>{var e=class{constructor(e,t={}){this.options=t,this.ctrl=null,this.bag=null,this.element=null,"string"==typeof e?(this.selector=e,this.element=document.querySelector(e)):e instanceof HTMLElement?(this.element=e,this.selector=null):(this.selector=null,this.element=null),this.element?this.initialize():this.selector&&console.warn(`BaseModuleClass: セレクター "${this.selector}" に対応する要素が見つかりません。`)}initialize(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const i=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);i&&"function"==typeof t[i]&&e.add(()=>t[i](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BaseModuleClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),this.init(this.element,{bag:this.bag,signal:this.ctrl.signal})}init(e,{bag:t,signal:n}){throw new Error("BaseModuleClass: init()メソッドはサブクラスで実装する必要があります。")}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}},t=class extends e{init(e,{bag:t,signal:n}){const{headerSelector:s=".js_header",menuBtnSelector:i=".js_headerBtn",menuSelector:o=".js_headerMenu",bgSelector:l=".js_headerBg",activeClass:a="is_active",displayClass:r="is-display",openDelay:c=300,closeDelay:u=600}=this.options,d=document.querySelector(s);if(!d)return void console.warn("ヘッダー要素が見つかりません。");const g=d.querySelector(i),h=d.querySelector(o),f=d.querySelector(l);if(!h||!g||!f)return void console.warn("ヘッダーの必要な要素が見つかりません。");g.addEventListener("click",()=>{this.toggleHeaderMenu({menuBtn:g,menu:h,bg:f,activeClass:a,displayClass:r,openDelay:c,closeDelay:u,signal:n,bag:t})},{signal:n});h.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{const e=setTimeout(()=>{this.closeHeaderMenu({menuBtn:g,menu:h,bg:f,activeClass:a,displayClass:r,closeDelay:u,signal:n,bag:t})},c);n.addEventListener("abort",()=>clearTimeout(e),{once:!0})},{signal:n})})}toggleHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:i="is_active",displayClass:o="is-display",openDelay:l=300,closeDelay:a=600,signal:r,bag:c}=e;if(t.style.pointerEvents="none",t.classList.toggle(i),s.classList.toggle(i),t.classList.contains(i)){n.classList.toggle(o);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(i)},l);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}else{n.classList.toggle(i);const e=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(o)},a);r.addEventListener("abort",()=>clearTimeout(e),{once:!0})}}closeHeaderMenu(e={}){const{menuBtn:t,menu:n,bg:s,activeClass:i="is_active",displayClass:o="is-display",closeDelay:l=600,signal:a,bag:r}=e;t.style.pointerEvents="none",t.classList.remove(i),s.classList.remove(i),n.classList.remove(i);const c=setTimeout(()=>{t.style.pointerEvents="auto",n.classList.toggle(o)},l);a.addEventListener("abort",()=>clearTimeout(c),{once:!0})}};function n(e){const t=document.querySelectorAll('a[href^="#"]');t&&0!==t.length&&t.forEach(t=>{t.addEventListener("click",t=>function(e,t){const n=e.currentTarget.getAttribute("href");if(!n||"#"===n||"#0"===n)return;const s=n.split("#")[1];if(!s)return;const i=document.getElementById(s)||document.querySelector(n);if(!i)return void console.warn(`ターゲット要素 "#${s}" が見つかりません。`);e.preventDefault(),function(e,t){const n=500,s=0,i=document.querySelector("header"),o=i?i.offsetHeight:0,l=e.getBoundingClientRect(),a=window.getComputedStyle(e),r=parseFloat(a.getPropertyValue("padding-block-start")),c=window.scrollY;!function(e,t,n){const s=window.scrollY,i=e-s;let o=null,l=null;function a(e){if(n?.aborted)return;null===o&&(o=e);const r=e-o,c=Math.min(r/t,1),u=c<.5?4*c*c*c:1-Math.pow(-2*c+2,3)/2;window.scrollTo(0,s+i*u),r<t&&(l=requestAnimationFrame(a))}l=requestAnimationFrame(a),n&&n.addEventListener("abort",()=>{null!==l&&cancelAnimationFrame(l)},{once:!0})}(c+l.top+r-o+s,n,t)}(i,t)}(t,e),{signal:e})})}var s=window.Swiper,{Navigation:i,Pagination:o,Autoplay:l,EffectFade:a}=s;s||console.error("Swiper is not loaded. Please check if the CDN script is included in HTML.");new class{constructor(e=null,t=null){this.selector=e,this.pageInitFunction=t,this.ctrl=null,this.bag=null,this.waitForDOM()}waitForDOM(){const e=async()=>{this.element=this.selector?document.querySelector(this.selector):document.body,!this.selector||this.element?await this.init():console.warn(`セレクター "${this.selector}" に対応する要素が見つかりません。`)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}async init(){this.ctrl=new AbortController,this.bag=function(){const e=new Set;return{add:t=>("function"==typeof t&&e.add(t),t),dispose(t,n,s=[]){if(!t)return;const i=n??["revert","destroy","kill","disconnect","abort"].find(e=>"function"==typeof t[e]);i&&"function"==typeof t[i]&&e.add(()=>t[i](...s))},flush(){for(const t of e)try{t()}catch(e){console.warn("BasePageClass cleanup error:",e)}e.clear()}}}(),this.ctrl.signal.addEventListener("abort",()=>this.bag.flush(),{once:!0}),await this.initCommon(),this.initPage()}async initCommon(){await async function({bag:e,signal:s}){new t(".js_header",{}),n(s),document.body.classList.remove("no-js"),document.querySelectorAll("img").forEach(function(e){e.addEventListener("contextmenu",function(e){e.preventDefault()},{signal:s}),e.addEventListener("selectstart",function(e){e.preventDefault()},{signal:s}),e.addEventListener("mousedown",function(e){e.preventDefault()},{signal:s})});const i=document.querySelector("main"),o=document.querySelector(".footer");if(i&&o){const e=()=>{const e=window.innerHeight-o.offsetHeight;i.style.minHeight=`${e}px`};e(),window.addEventListener("resize",e,{signal:s})}}({bag:this.bag,signal:this.ctrl.signal})}initPage(){this.pageInitFunction&&"function"==typeof this.pageInitFunction&&this.pageInitFunction({bag:this.bag,signal:this.ctrl.signal})}cleanup(){this.ctrl&&this.ctrl.abort()}getBag(){return this.bag}getSignal(){return this.ctrl?.signal||null}}("#top",async()=>{console.log("topページスクリプト")})})();